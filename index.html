<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AMM Starter Strategy Visualizer</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="backdrop"></div>
  <div class="app-shell">
    <header class="topbar reveal">
      <div>
        <h1>AMM Starter Strategy Visualizer</h1>
        <p>Code on the left, live market on the right. Step through every trade.</p>
      </div>

      <div class="top-actions">
        <button id="themeToggleBtn" class="theme-toggle" type="button" aria-label="Toggle dark mode">
          Dark Mode
        </button>
      </div>
    </header>

    <main class="layout">
      <section class="panel code-panel reveal delay-1">
        <div class="panel-head panel-head-stack">
          <div class="panel-head-row">
            <h2>Strategy Code</h2>
            <span id="strategyStateBadge" class="badge">-</span>
          </div>
          <label class="strategy-picker" for="strategySelect">
            <span>Strategy</span>
            <select id="strategySelect"></select>
          </label>
        </div>

        <div id="codeView" class="code-view" aria-label="Strategy code"></div>

        <div class="explain-box">
          <h3>What the code just did</h3>
          <p id="codeExplanation">Press Step to begin the simulation.</p>
        </div>
      </section>

      <section class="panel market-panel reveal delay-2">
        <div class="panel-head">
          <h2>Simulated Market</h2>
          <span id="clockLabel" class="clock">Step 0 | Trade 0</span>
        </div>

        <div class="market-controls">
          <label class="control speed-control">
            <span>Speed</span>
            <div class="speed-inner">
              <input id="speedRange" type="range" min="1" max="6" step="1" value="3" />
              <strong id="speedLabel">1.0x</strong>
            </div>
          </label>

          <div class="button-row">
            <button id="playBtn" type="button">Play</button>
            <button id="stepBtn" type="button">Step</button>
            <button id="resetBtn" type="button">Reset</button>
          </div>
        </div>

        <div class="chart-wrap">
          <svg id="curveChart" viewBox="0 0 760 320" role="img" aria-label="AMM reserve curve chart"></svg>
        </div>

        <div class="metrics">
          <div class="metric-card">
            <span>Fair Price</span>
            <strong id="fairPriceMetric">-</strong>
          </div>
          <div class="metric-card">
            <span>Strategy Spot</span>
            <strong id="strategySpotMetric">-</strong>
          </div>
          <div class="metric-card">
            <span>Strategy Fees</span>
            <strong id="feesMetric">-</strong>
          </div>
          <div class="metric-card">
            <span>Cumulative Edge</span>
            <strong id="edgeMetric">-</strong>
          </div>
        </div>

        <div class="depth-section">
          <div class="depth-head">
            <h3>Per-Pool Depth</h3>
            <span id="depthLegend" class="depth-legend">to 1% and 5% price impact</span>
          </div>
          <div id="depthView" class="depth-view"></div>
        </div>

        <div class="trade-section">
          <h3>Trade Tape</h3>
          <ul id="tradeTape" class="trade-tape"></ul>
        </div>
      </section>
    </main>

    <footer class="site-footer reveal delay-2">
      <a class="footer-link" href="https://x.com/devrelius" target="_blank" rel="noopener noreferrer" aria-label="X profile for devrelius">
        <span class="x-logo" aria-hidden="true">
          <svg viewBox="0 0 24 24" role="img" focusable="false">
            <path d="M4 3h5.2l4 5.6L18 3H20l-5.7 7.2L20.6 21h-5.1l-4.4-6.2L6 21H4l6-7.7z"></path>
          </svg>
        </span>
        <span>by @devrelius</span>
      </a>

      <a class="footer-link footer-repo" href="https://github.com/muttoni/ammvisualizer" target="_blank" rel="noopener noreferrer">
        GitHub Repo
      </a>
    </footer>
  </div>

  <script src="./app.js" defer></script>
</body>
</html>
